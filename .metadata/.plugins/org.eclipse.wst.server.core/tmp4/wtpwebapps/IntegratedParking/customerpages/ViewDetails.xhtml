<ui:composition
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">		
	<p:tab id="Details" title="My Details" class="formHeight">
		<p:panel class="formHeight">			
		<h3>Your Details</h3>
			<div id="box">
			</div>
			<b class="formName">Old Email :</b>
			<p:inputText class="formField" 
						 editable="false" 
						 size="40" 
						 value="#{customer.email}"/>
			<br/>
						
			<div class="formName">New Email : </div>
			<p:inputText id="email"
						 class="formField" 
				       	 label="email" 
			           	 size="40" 
		           		 requiredMessage="Email Address Required"
		           		 validatorMessage="Invalid email format" 
			       		 value="#{detailsControl.email}">
				<f:validateRegex pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
			</p:inputText>
			<p:watermark for="email" 
			             value="New email" />
			<br/>
			
			<b class="formName">Old Name : </b>
			<p:inputText class="formField" 
						 editable="false" 
						 size="40" 
						 value="#{customer.name}"/>
			<br/>
							
			<div class="formName">New Name : </div>
			<p:inputText class="formField" 
					     size="40" 
						 value="#{detailsControl.name}"/>
			<br/>
											
			<b class="formName">Old Card Number : </b>
			<p:inputText editable="false"
						 class="formField"
						 size="40" 
						 value="#{customer.displayCard}"/>
			<br/>
		
			<div class="formName">New Card Number : </div>
			<p:password id="visa"
						class="formField" 
				        label="visa" 
			            size="40" 
			            validatorMessage="Invalid credit card" 
				        value="#{detailsControl.newCard}">		            
				<f:validateRegex pattern="^4\d{15}$" />
			</p:password>
			<p:watermark for="visa" 
				         value="card number"/>
			<br/>
	
			<b class="formName">Password : </b>
			<p:password feedback="true" 
						class="formField" 
						required="true"
						size="40"  
						requiredMessage="cannot update details without password" 
						value="#{detailsControl.pass}"/>
			<br/>
			<div class="formName">New Password : </div>
			<p:password id="password" 
		            	label="password"
		            	class="formField"  
		            	size="40" 
			           	requiredMessage="Password Required"
			           	validatorMessage="Invalid password -> 4 - 8 characters, mixture of upper/lower case letters and digits" 
			       		value="#{detailsControl.newpass}" 
			           	feedback="true">
				<f:validateRegex pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{4,8}$" />
			</p:password>
			<p:watermark for="password" 
		          		 value="Password"/>
			<br/>
			<br/>
			<span class="loginButton">
				<p:commandButton value="Submit" type="Submit" action="#{detailsControl.edit(customer)}" ajax="false"/>
			</span>
		</p:panel>
	</p:tab>
</ui:composition>